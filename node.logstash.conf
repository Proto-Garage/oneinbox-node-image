input {
  file{
    path => ["/var/log/node/*.log"]
    start_position => "beginning"
  }
}
filter {
  grok {
    match => {
      "message" => "%{DAY:day}, %{MONTHDAY:monthday} %{MONTH:month} %{YEAR:year} %{TIME:time} %{WORD:timezone} %{WORD:scope}:%{DATA:tags}:%{WORD:level} %{GREEDYDATA:body}"
    }
  }
  mutate {
    split => {
      fields => "tags"
      terminator => ","
    }
  }
  json {
    source => "body"
    target => "body"
  }
}
output {
  loggly {
    key => "ec56c679-661b-47b6-bfdf-d2b8c6bf5ba3"
    proto => "https"
  }
}
